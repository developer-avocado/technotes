# Git

## 設定

```sh:~/.gitconfig
[user]
    name = sato.taro
    email = sato.taro@hogehoge.com
[http]
    proxy = http://${ID}:${PASSWORD}@${IP}:${PORT}
[https]
    proxy = http://${ID}:${PASSWORD}@${IP}:${PORT}
[url "https://github.com"]
    insteadOf = git://github.com
```

## Fast-Forwardマージ

`git merge --no-ff`の`--no-ff`オプションは、「Fast-Forwardマージを無効にする」ためのオプションです。以下にその詳細と目的を説明します。

通常のマージ操作では、Gitは可能な場合、Fast-Forward（FF）マージを行います。Fast-Forwardマージは、以下のような状況で発生します：

1. **ブランチが直線的に進んでいる場合**:
   - 例えば、`feature`ブランチを`main`ブランチにマージする際に、`main`ブランチが`feature`ブランチの先祖であり、他にコミットがない場合、Gitは`main`ブランチを単に`feature`ブランチの先端に「進める」だけで済みます。

この操作は以下の図のように行われます：

```
A---B---C (main)
       \
        D---E (feature)
```

上記の状態で`feature`ブランチを`main`ブランチにFast-Forwardマージすると、`main`ブランチは以下のように更新されます：

```
A---B---C---D---E (main, feature)
```

この場合、マージコミットは作成されません。

### `--no-ff`オプションの目的

`--no-ff`オプションを使用すると、GitはFast-Forwardマージを無効にし、常に新しいマージコミットを作成します。これにより、マージコミットが作成されることで、ブランチの統合点が明確に記録されます。

#### 具体例

同じブランチ構造で`--no-ff`を使うと以下のようになります：

```
A---B---C (main)
       \
        D---E (feature)
```

`git merge --no-ff feature`を実行すると、次のようなマージコミットが作成されます：

```
A---B---C-------M (main)
       \       /
        D---E (feature)
```

ここで`M`は、新しく作成されたマージコミットを示します。

### `--no-ff`オプションを使う理由

1. **履歴の明確化**:
   - マージコミットを作成することで、どのコミットがどのブランチから来たのかが明確になります。これにより、後で履歴を追跡する際に、機能がどのように統合されたかを簡単に理解できます。

2. **グループ化**:
   - 関連するコミットをひとつのマージコミットとしてグループ化できるため、特定の機能や修正がいつ統合されたかを明確に記録できます。

3. **再現性**:
   - 将来的にブランチ構造やマージ戦略を変更する必要が生じた場合でも、マージコミットがあることで作業履歴が再現しやすくなります。

### まとめ

`git merge --no-ff`の`--no-ff`オプションは、Fast-Forwardマージを防ぎ、常にマージコミットを作成することで、ブランチ統合の履歴を明確に保つためのものです。これにより、後で履歴を振り返った際に、変更がどのように統合されたかを明確に理解できる利点があります。
